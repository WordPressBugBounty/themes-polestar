!function(o){function e(){var e=o(window).scrollTop(),t="no";o(".panel-row-style").each(function(){var n="#"+o(this).attr("id"),a=o(this).offset().top-1,s=o(this).outerHeight(),r=a-i(),l=a+s-i();return e>=r&&e<=l?(t="yes",o("#site-navigation .current").removeClass("current"),o('#site-navigation a[href$="'+n+'"]').parent("li").addClass("current"),!1):void("no"===t&&o("#site-navigation .current").removeClass("current"))})}o.fn.polestarIsVisible=function(){var o=this[0].getBoundingClientRect();return o.bottom>=0&&o.right>=0&&o.top<=(window.innerHeight||document.documentElement.clientHeight)&&o.left<=(window.innerWidth||document.documentElement.clientWidth)},o(window).on("load",function(){o(".entry-thumbnail").each(function(){img=o(this).find("img"),img_width=img.width(),img_height=img.height(),o(this).css({maxWidth:img_width,maxHeight:img_height})})}),"undefined"!=typeof o.fn.fitVids&&o(".entry-content, .entry-content .panel, .entry-video, .woocommerce #main").fitVids({ignore:".tableauViz"}),o(document).ready(function(){o(".flexslider").each(function(){o(this).flexslider({animation:"slide",controlNav:!1,customDirectionNav:o(this).find(".flex-direction-nav a"),start:function(){o(".flexslider .slides img").show()}}),o(window).one("panelsStretchRows",function(){o("body:not(.siteorigin-panels-css-container) .siteorigin-panels-stretch .flexslider").flexslider().resize()})})});var t=function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=o("#masthead").length?o("#masthead").outerHeight():o(window).outerHeight()/2;e>t?o("#scroll-to-top").hasClass("show")||o("#scroll-to-top").css("pointer-events","auto").addClass("show"):o("#scroll-to-top").hasClass("show")&&o("#scroll-to-top").css("pointer-events","none").removeClass("show")};t(),o(window).on("scroll",t),o("#scroll-to-top").on("click",function(){o("html, body").stop().animate({scrollTop:0})});var n=o("#header-search");o("#masthead .search-icon").on("click",function(){n.fadeIn("fast"),n.find("form").css("margin-top",-n.find("form").innerHeight()/2),n.find('input[type="search"]').trigger("focus").trigger("select"),n.find("#close-search").addClass("animate-in")}),n.find("#close-search").on("click",function(){n.fadeOut(350),o(this).removeClass("animate-in")}),o(window).on("scroll",function(){n.is(":visible")&&n.find("form").css("margin-top",-n.find("form").outerHeight()/2)}),o("#header-search input[type=search]").on("focusout",function(e){o("body").hasClass("disable-search-close")||o("#close-search.animate-in").trigger("click")}),o(document).on("keyup",function(e){27==e.keyCode&&o("#close-search.animate-in").trigger("click")}),o(window).on("load",function(){o("body.no-js").removeClass("no-js"),o("body").hasClass("css3-animations")&&(o(".menu-item").children("a").on("focusin",function(){o(this).parents("ul, li").addClass("focus")}),o(".menu-item").children("a").on("click",function(){o(this).parents("ul, li").removeClass("focus")}),o(".menu-item").children("a").on("focusout",function(){o(this).parents("ul, li").removeClass("focus")}))}),o(document).ready(function(o){window.location.hash||(o('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),o(window).on("click",function(){o("#site-navigation ul li").hasClass("current")?(o("#site-navigation li").removeClass("current-menu-item"),o("#site-navigation li.current-menu-ancestor").removeClass("current-menu-ancestor current-menu-parent")):0==o(document).scrollTop()&&(o('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),o('#site-navigation a[href="'+window.location.href+'"]').parents("li.menu-item-has-children").addClass("current-menu-ancestor current-menu-parent"))}))}),("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints||window.navigator.MaxTouchPoints)&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(o("body").css("cursor","pointer"),o("body").addClass("ios")),o(".main-navigation #primary-menu").find(".menu-item-has-children > a").each(function(){o(this).on("click touchend",function(e){var t=o(this);e.stopPropagation(),"click"!=e.type&&(t.parent().hasClass("hover")||(o(".menu-item.hover").removeClass("hover"),t.parents(".menu-item").addClass("hover"),e.preventDefault()),o(document).one("click",function(){t.parent().removeClass("hover")}))})}));var i=function(){var e,t=o("#wpadminbar").outerHeight(),n=o("body").hasClass("admin-bar"),i=o("header").hasClass("sticky"),a=o(".site-header");if(e=i&&n&&o(window).width()>600?t+o("header").outerHeight()-1:i?o("header").outerHeight()-1:0,a.data("scale-logo")&&!a.hasClass("stuck")){var s=parseInt(a.css("padding-bottom"));e+=s-s*polestar.logoScale*2}return e};o.fn.polestarSmoothScroll=function(){o("body").hasClass("disable-smooth-scroll")||o(this).on("click",function(e){var t=this.hash,n=t.substring(1),a=this;if(o(".panel-grid [id*="+n+"]").length>0?(o("#site-navigation .current").removeClass("current"),o(a).parent("li").addClass("current")):o("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var s=o(this.hash);if(s=s.length?s:o("[name="+this.hash.slice(1)+"]"),s.length)return o("html, body").stop().animate({scrollTop:s.offset().top-i()},{duration:1200,start:function(){o("html, body").on("wheel touchmove",function(){o("html, body").stop().off("wheel touchmove")})},complete:function(){o("html, body").finish().off("wheel touchmove")}}),!1}})},o(window).on("load",function(){if(o('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .woocommerce-review-link[href*="#"]:not([href="#"]), .puro-scroll[href*="#"]:not([href="#"])').polestarSmoothScroll(),location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var e=o(window.location.hash);e.length&&setTimeout(function(){o("html, body").animate({scrollTop:e.offset().top-i()},0,function(){o("#masthead").hasClass("sticky-menu")&&smSetup()})},100)}}),o(window).on("scroll",e);var a=!1;o("#mobile-menu-button").on("click",function(e){e.preventDefault();var t=o(this);if(t.toggleClass("to-close"),a===!1){a=o("<div></div>").append(o(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),o("#header-search form").length&&a.append(o("#header-search form").clone()),o(".main-navigation .shopping-cart").length&&a.append(o(".main-navigation .shopping-cart .shopping-cart-link").clone()),a.find("#primary-menu").show().css("opacity",1),a.find(".menu-item-has-children > a").addClass("has-dropdown"),a.find(".page_item_has_children > a").addClass("has-dropdown"),a.find(".has-dropdown").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-chevron-down" aria-hidden="true"></i></button>'),a.find(".dropdown-toggle").on("click",function(e){e.preventDefault(),o(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")}),a.find(".has-dropdown").click(function(e){"undefined"!=typeof o(this).attr("href")&&"#"!=o(this).attr("href")||(e.preventDefault(),o(this).siblings(".dropdown-toggle").trigger("click"))});var n=function(){if(o("#masthead").hasClass("sticky")){var e="fixed"===o("#wpadminbar").css("position")?o("#wpadminbar").outerHeight():0,t=o("#masthead").innerHeight(),n=o(window).height()-t-e;o("#mobile-navigation").css("max-height",n)}};n(),o(window).on("resize",n),o("#mobile-navigation").scroll(n)}a.slideToggle("fast"),o("#mobile-navigation a").on("click",function(e){(!o(this).hasClass("has-dropdown")||"undefined"!=typeof o(this).attr("href")&&"#"!==o(this).attr("href"))&&a.is(" :visible")&&a.slideUp("fast"),t.removeClass("to-close")}),o('#mobile-navigation a[href*="#"]:not([href="#"])').polestarSmoothScroll()}),o(window).on("load",function(){polestar.logoScale=parseFloat(polestar.logoScale);var e=o("#masthead"),t={top:parseInt(e.css("padding-top")),bottom:parseInt(e.css("padding-bottom"))};if(e.data("scale-logo")){var n=e.find(".site-branding img"),i=n.width(),a=n.height(),s=i*polestar.logoScale;scaledHeight=a*polestar.logoScale,o(".site-branding img").wrap("<div class='custom-logo-wrapper'></div>");var r=function(){var i=e.find(".site-branding > *"),a=window.pageYOffset||document.documentElement.scrollTop;if(a>0?e.css({"padding-top":t.top*polestar.logoScale,"padding-bottom":t.bottom*polestar.logoScale}):e.css({"padding-top":t.top,"padding-bottom":t.bottom}),n.length)if(a>0){var r=polestar.logoScale+Math.max(0,48-a)/48*(1-polestar.logoScale);n.height()==scaledHeight&&n.width()==s&&r==polestar.logoScale||o(".site-branding img").css({width:100*r+"%"})}else o(".site-branding img").css({width:""});else a>0?i.css("transform","scale("+polestar.logoScale+")"):i.css("transform","scale(1)")};r(),o(window).scroll(r).resize(r)}if(o("#masthead").hasClass("sticky")){var e=o("#masthead"),l=o('<div class="masthead-sentinel"></div>').insertAfter(e),c=o("#topbar"),d=o('#topbar .woocommerce-store-notice[style*="display: none"]'),h=function(){o("body").hasClass("mobile-header-ns")&&o(window).width()<polestar.collapse||(l!==!1&&l.css("height",e.outerHeight()),o("body").hasClass("no-topbar")||c.polestarIsVisible()||o("body").addClass("topbar-out"),c.length&&o("body").hasClass("topbar-out")&&c.polestarIsVisible()&&o("body").removeClass("topbar-out"),o("body").hasClass("no-topbar")&&!o(window).scrollTop()&&o("body").addClass("topbar-out"),o("body").hasClass("no-topbar")||!o("body").hasClass("no-topbar")&&o("body").hasClass("topbar-out")||d.length?e.css("position","fixed"):o("body").hasClass("no-topbar")||o("body").hasClass("topbar-out")||e.css("position","absolute"))};h(),o(window).on("resize scroll",h);var m=function(){o(window).scrollTop()>0?o(e).addClass("stuck"):o(e).removeClass("stuck")};m(),o(window).on("scroll",m)}})}(jQuery);